(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Iab2:function(n,t,l){var e,o;void 0===(o="function"==typeof(e=function(){"use strict";function t(n,t,l){var e=new XMLHttpRequest;e.open("GET",n),e.responseType="blob",e.onload=function(){a(e.response,t,l)},e.onerror=function(){console.error("could not download file")},e.send()}function l(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function e(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(l)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(n,a,u){var r=o.URL||o.webkitURL,i=document.createElement("a");i.download=a=a||n.name||"download",i.rel="noopener","string"==typeof n?(i.href=n,i.origin===location.origin?e(i):l(i.href)?t(n,a,u):e(i,i.target="_blank")):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){e(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,a){if(o=o||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function(n,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,a),o);else if(l(n))t(n,o,a);else{var u=document.createElement("a");u.href=n,u.target="_blank",setTimeout(function(){e(u)})}}:function(n,l,e,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof n)return t(n,l,e);var u="application/octet-stream"===n.type,r=/constructor/i.test(o.HTMLElement)||o.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||u&&r)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var n=s.result;n=i?n:n.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=n:location=n,a=null},s.readAsDataURL(n)}else{var c=o.URL||o.webkitURL,b=c.createObjectURL(n);a?a.location=b:location.href=b,a=null,setTimeout(function(){c.revokeObjectURL(b)},4e4)}});o.saveAs=a.saveAs=a,n.exports=a})?e.apply(t,[]):e)||(n.exports=o)},"sY+Z":function(n,t,l){"use strict";l.r(t);var e=l("CcnG"),o=function(){return function(){}}(),a=l("pMnS"),u=l("bujt"),r=l("UodH"),i=l("lLAP"),s=l("wFw1"),c=l("gIcY"),b=l("/VYK"),d=l("dWZg"),p=l("mrSG"),f=l("WKRr"),h=l("Qnqb"),m=l("67Y/"),g=l("AytR"),y=l("t/Na"),v=function(){function n(n){this.http=n}return n.prototype.genKeyPairs=function(){this.thisKeyPair=f.box.keyPair(),this.thatKeyPair=f.box.keyPair()},n.prototype.sendQContent=function(n){var t=this.encrypt(n);return this.http.post(g.a.apiURL+"/q",{content:t[0],nonce:t[1]}).pipe(Object(m.a)(function(n){return n.qid}))},n.prototype.encrypt=function(n){var t=Object(h.decodeUTF8)(n),l=Object(f.randomBytes)(f.box.nonceLength),e=Object(f.box)(t,l,this.thatKeyPair.publicKey,this.thisKeyPair.secretKey);return[Object(h.encodeBase64)(e),Object(h.encodeBase64)(l)]},n.ngInjectableDef=e.Kb({factory:function(){return new n(e.Ob(y.c))},token:n,providedIn:"root"}),n}(),w=function(){function n(n,t){this.g=n,this.router=t,this.rows=5,this.content=""}return n.prototype.ngOnInit=function(){this.textarea.nativeElement.focus()},n.prototype.onClick=function(){return p.b(this,void 0,void 0,function(){var n;return p.e(this,function(t){switch(t.label){case 0:return this.g.genKeyPairs(),[4,this.g.sendQContent(this.content).toPromise()];case 1:return n=t.sent(),this.router.navigateByUrl("/q/"+n+"/created"),[2]}})})},n.prototype.onChange=function(){var n=this.content.split(/\r\n|\r|\n/).length;this.rows=n>5?n:5},n}(),q=l("ZYCi"),k=e.pb({encapsulation:0,styles:[[".q-create-textarea[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.5em}"]],data:{}});function z(n){return e.Ib(0,[e.Eb(402653184,1,{textarea:0}),(n()(),e.rb(1,0,null,null,2,"button",[["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.onClick()&&e),e},u.b,u.a)),e.qb(2,180224,null,0,r.b,[e.k,i.b,[2,s.a]],null,null),(n()(),e.Gb(-1,0,["Create"])),(n()(),e.rb(4,0,[[1,0],["textarea",1]],null,6,"textarea",[["cdkAutosizeMinRows","10"],["cdkTextareaAutosize",""],["class","monospace q-create-textarea cdk-textarea-autosize"],["rows","1"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,l){var o=!0,a=n.component;return"input"===t&&(o=!1!==e.Bb(n,5)._handleInput(l.target.value)&&o),"blur"===t&&(o=!1!==e.Bb(n,5).onTouched()&&o),"compositionstart"===t&&(o=!1!==e.Bb(n,5)._compositionStart()&&o),"compositionend"===t&&(o=!1!==e.Bb(n,5)._compositionEnd(l.target.value)&&o),"input"===t&&(o=!1!==e.Bb(n,10)._noopInputHandler()&&o),"ngModelChange"===t&&(o=!1!==(a.content=l)&&o),o},null,null)),e.qb(5,16384,null,0,c.b,[e.E,e.k,[2,c.a]],null,null),e.Db(1024,null,c.d,function(n){return[n]},[c.b]),e.qb(7,671744,null,0,c.g,[[8,null],[8,null],[8,null],[6,c.d]],{model:[0,"model"]},{update:"ngModelChange"}),e.Db(2048,null,c.e,null,[c.g]),e.qb(9,16384,null,0,c.f,[[4,c.e]],null,null),e.qb(10,4603904,null,0,b.a,[e.k,d.a,e.z],{minRows:[0,"minRows"],enabled:[1,"enabled"]},null)],function(n,t){n(t,7,0,t.component.content),n(t,10,0,"10","")},function(n,t){n(t,1,0,e.Bb(t,2).disabled||null,"NoopAnimations"===e.Bb(t,2)._animationMode),n(t,4,0,e.tb(1,"","This is an encrypted online questionnaire.\n\nHere is the guide:\n1. Type or paste the content of your questionnaire here.\n2. Click the 'Create' button above.",""),e.Bb(t,9).ngClassUntouched,e.Bb(t,9).ngClassTouched,e.Bb(t,9).ngClassPristine,e.Bb(t,9).ngClassDirty,e.Bb(t,9).ngClassValid,e.Bb(t,9).ngClassInvalid,e.Bb(t,9).ngClassPending)})}function B(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,1,"app-q-create",[],null,null,null,z,k)),e.qb(1,114688,null,0,w,[v,q.k],null,null)],function(n,t){n(t,1,0)},null)}var R=e.nb("app-q-create",w,B,{},{},[]),x=l("lzlj"),C=l("FVSy"),A=l("Iab2"),L=function(){function n(n,t){this.g=n,this.route=t,this.questionnaireAddress=this.getQuestionnaireAddress(),this.resultAddress=this.getResultsAddress(),this.content="Questionnaire URL\nSend it to your questionee.\n"+this.questionnaireAddress+"\n\nResults URL:\nOpen it to view results. You should keep it a SECRET.\n"+this.resultAddress+"\n"}return n.prototype.ngOnInit=function(){new ClipboardJS(".btnCopy")},n.prototype.download=function(){var n=new Blob([this.content],{type:"text/plain"});A.saveAs(n,this.route.snapshot.params.qid+".txt")},n.prototype.getQuestionnaireAddress=function(){var n=new Uint8Array(f.box.secretKeyLength+f.box.publicKeyLength);n.set(this.g.thatKeyPair.secretKey,0),n.set(this.g.thisKeyPair.publicKey,f.box.secretKeyLength);var t=Object(h.encodeBase64)(n);return""+location.origin+g.a.offset+"/"+this.route.snapshot.params.qid+"#"+t},n.prototype.getResultsAddress=function(){var n=new Uint8Array(f.box.secretKeyLength+f.box.secretKeyLength);n.set(this.g.thisKeyPair.secretKey,0),n.set(this.g.thatKeyPair.secretKey,f.box.secretKeyLength);var t=Object(h.encodeBase64)(n);return""+location.origin+g.a.offset+"/r/"+this.route.snapshot.params.qid+"#"+t},n}(),j=e.pb({encapsulation:0,styles:[[""]],data:{}});function K(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,3,"div",[["class","button-row"]],null,null,null,null,null)),(n()(),e.rb(1,0,null,null,2,"button",[["mat-raised-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,l){var e=!0;return"click"===t&&(e=!1!==n.component.download()&&e),e},u.b,u.a)),e.qb(2,180224,null,0,r.b,[e.k,i.b,[2,s.a]],null,null),(n()(),e.Gb(-1,0,["Download"])),(n()(),e.rb(4,0,null,null,31,"div",[["class","monospace pre-line"],["id","content"]],null,null,null,null,null)),(n()(),e.rb(5,0,null,null,13,"mat-card",[["class","content mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,x.d,x.a)),e.qb(6,49152,null,0,C.a,[[2,s.a]],null,null),(n()(),e.rb(7,0,null,0,7,"mat-card-header",[["class","mat-card-header"]],null,null,null,x.c,x.b)),e.qb(8,49152,null,0,C.c,[],null,null),(n()(),e.rb(9,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),e.qb(10,16384,null,0,C.f,[],null,null),(n()(),e.Gb(-1,null,["Questionnaire URL"])),(n()(),e.rb(12,0,null,1,2,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),e.qb(13,16384,null,0,C.e,[],null,null),(n()(),e.Gb(-1,null,["Send it to your questionee."])),(n()(),e.rb(15,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.qb(16,16384,null,0,C.b,[],null,null),(n()(),e.rb(17,0,null,null,1,"p",[["class","btnCopy monospace"],["data-clipboard-target","#qurl"],["id","qurl"]],null,null,null,null,null)),(n()(),e.Gb(18,null,["",""])),(n()(),e.rb(19,0,null,null,16,"mat-card",[["class","content mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,x.d,x.a)),e.qb(20,49152,null,0,C.a,[[2,s.a]],null,null),(n()(),e.rb(21,0,null,0,10,"mat-card-header",[["class","mat-card-header"]],null,null,null,x.c,x.b)),e.qb(22,49152,null,0,C.c,[],null,null),(n()(),e.rb(23,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),e.qb(24,16384,null,0,C.f,[],null,null),(n()(),e.Gb(-1,null,["Results URL"])),(n()(),e.rb(26,0,null,1,5,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),e.qb(27,16384,null,0,C.e,[],null,null),(n()(),e.Gb(-1,null,["Open it to view results. You should keep it a "])),(n()(),e.rb(29,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),e.Gb(-1,null,["SECRET"])),(n()(),e.Gb(-1,null,["."])),(n()(),e.rb(32,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.qb(33,16384,null,0,C.b,[],null,null),(n()(),e.rb(34,0,null,null,1,"p",[["class","btnCopy monospace"],["data-clipboard-target","#curl"],["id","curl"]],null,null,null,null,null)),(n()(),e.Gb(35,null,["",""]))],null,function(n,t){var l=t.component;n(t,1,0,e.Bb(t,2).disabled||null,"NoopAnimations"===e.Bb(t,2)._animationMode),n(t,5,0,"NoopAnimations"===e.Bb(t,6)._animationMode),n(t,18,0,l.questionnaireAddress),n(t,19,0,"NoopAnimations"===e.Bb(t,20)._animationMode),n(t,35,0,l.resultAddress)})}function O(n){return e.Ib(0,[(n()(),e.rb(0,0,null,null,1,"app-q-created",[],null,null,null,K,j)),e.qb(1,114688,null,0,L,[v,q.a],null,null)],function(n,t){n(t,1,0)},null)}var E=e.nb("app-q-created",L,O,{},{},[]),M=l("Ip0R"),U=l("M2Lx"),P=l("Wf4p"),T=function(){return function(){}}(),_=l("Fzqc"),I=l("ZYjt"),S=l("seP3"),G=l("b716"),Q=l("LC5p"),D=l("0/Q6");l.d(t,"QuestionerModuleNgFactory",function(){return H});var H=e.ob(o,[],function(n){return e.yb([e.zb(512,e.j,e.bb,[[8,[a.a,R,E]],[3,e.j],e.x]),e.zb(4608,M.k,M.j,[e.u,[2,M.r]]),e.zb(4608,c.i,c.i,[]),e.zb(4608,U.a,U.a,[]),e.zb(4608,P.a,P.a,[]),e.zb(1073742336,M.c,M.c,[]),e.zb(1073742336,c.h,c.h,[]),e.zb(1073742336,c.c,c.c,[]),e.zb(1073742336,q.l,q.l,[[2,q.q],[2,q.k]]),e.zb(1073742336,T,T,[]),e.zb(1073742336,_.a,_.a,[]),e.zb(1073742336,P.d,P.d,[[2,P.b],[2,I.f]]),e.zb(1073742336,d.b,d.b,[]),e.zb(1073742336,P.h,P.h,[]),e.zb(1073742336,r.c,r.c,[]),e.zb(1073742336,b.b,b.b,[]),e.zb(1073742336,U.b,U.b,[]),e.zb(1073742336,S.a,S.a,[]),e.zb(1073742336,G.a,G.a,[]),e.zb(1073742336,C.d,C.d,[]),e.zb(1073742336,P.e,P.e,[]),e.zb(1073742336,P.f,P.f,[]),e.zb(1073742336,Q.a,Q.a,[]),e.zb(1073742336,D.a,D.a,[]),e.zb(1073742336,o,o,[]),e.zb(1024,q.i,function(){return[[{path:"create",component:w},{path:":qid/created",component:L},{path:"",redirectTo:"/create",pathMatch:"full"}]]},[])])})}}]);