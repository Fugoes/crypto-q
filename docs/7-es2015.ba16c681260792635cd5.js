(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Iab2:function(n,l,t){var e,o;void 0===(o="function"==typeof(e=function(){"use strict";function l(n,l,t){var e=new XMLHttpRequest;e.open("GET",n),e.responseType="blob",e.onload=function(){a(e.response,l,t)},e.onerror=function(){console.error("could not download file")},e.send()}function t(n){var l=new XMLHttpRequest;l.open("HEAD",n,!1);try{l.send()}catch(n){}return 200<=l.status&&299>=l.status}function e(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(l){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(n,a,u){var i=o.URL||o.webkitURL,s=document.createElement("a");s.download=a=a||n.name||"download",s.rel="noopener","string"==typeof n?(s.href=n,s.origin===location.origin?e(s):t(s.href)?l(n,a,u):e(s,s.target="_blank")):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){e(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,a){if(o=o||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function(n,l){return void 0===l?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,a),o);else if(t(n))l(n,o,a);else{var u=document.createElement("a");u.href=n,u.target="_blank",setTimeout(function(){e(u)})}}:function(n,t,e,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof n)return l(n,t,e);var u="application/octet-stream"===n.type,i=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||u&&i)&&"object"==typeof FileReader){var r=new FileReader;r.onloadend=function(){var n=r.result;n=s?n:n.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=n:location=n,a=null},r.readAsDataURL(n)}else{var c=o.URL||o.webkitURL,b=c.createObjectURL(n);a?a.location=b:location.href=b,a=null,setTimeout(function(){c.revokeObjectURL(b)},4e4)}});o.saveAs=a.saveAs=a,n.exports=a})?e.apply(l,[]):e)||(n.exports=o)},"sY+Z":function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class o{}var a=t("pMnS"),u=t("bujt"),i=t("Fwaw"),s=t("5GAg"),r=t("omvX"),c=t("s7LF"),b=t("oapL"),d=t("/HVE"),p=t("WKRr"),h=t("Qnqb"),m=t("lJxs"),f=t("AytR"),g=t("IheW");const y=(()=>{class n{constructor(n){this.http=n}genKeyPairs(){this.thisKeyPair=p.box.keyPair(),this.thatKeyPair=p.box.keyPair()}sendQContent(n){let l=this.encrypt(n);return this.http.post(`${f.a.apiURL}/q`,{content:l[0],nonce:l[1]}).pipe(Object(m.a)(n=>n.qid))}encrypt(n){const l=Object(h.decodeUTF8)(n),t=Object(p.randomBytes)(p.box.nonceLength),e=Object(p.box)(l,t,this.thatKeyPair.publicKey,this.thisKeyPair.secretKey);return[Object(h.encodeBase64)(e),Object(h.encodeBase64)(t)]}}return n.ngInjectableDef=e.Ib({factory:function(){return new n(e.Mb(g.c))},token:n,providedIn:"root"}),n})();class v{constructor(n,l){this.g=n,this.router=l,this.rows=5,this.content=""}ngOnInit(){this.textarea.nativeElement.focus()}onClick(){return n=this,t=function*(){this.g.genKeyPairs();let n=yield this.g.sendQContent(this.content).toPromise();this.router.navigateByUrl(`/q/${n}/created`)},new((l=void 0)||(l=Promise))(function(e,o){function a(n){try{i(t.next(n))}catch(l){o(l)}}function u(n){try{i(t.throw(n))}catch(l){o(l)}}function i(n){n.done?e(n.value):new l(function(l){l(n.value)}).then(a,u)}i((t=t.apply(n,[])).next())});var n,l,t}onChange(){let n=this.content.split(/\r\n|\r|\n/).length;this.rows=n>5?n:5}}var w=t("iInd"),x=e.nb({encapsulation:0,styles:[[".q-create-textarea[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.5em}"]],data:{}});function k(n){return e.Gb(0,[e.Cb(402653184,1,{textarea:0}),(n()(),e.pb(1,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onClick()&&e),e},u.b,u.a)),e.ob(2,180224,null,0,i.b,[e.k,s.b,[2,r.a]],null,null),(n()(),e.Eb(-1,0,["Create"])),(n()(),e.pb(4,0,[[1,0],["textarea",1]],null,6,"textarea",[["cdkAutosizeMinRows","10"],["cdkTextareaAutosize",""],["class","monospace q-create-textarea cdk-textarea-autosize"],["rows","1"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,t){var o=!0,a=n.component;return"input"===l&&(o=!1!==e.zb(n,5)._handleInput(t.target.value)&&o),"blur"===l&&(o=!1!==e.zb(n,5).onTouched()&&o),"compositionstart"===l&&(o=!1!==e.zb(n,5)._compositionStart()&&o),"compositionend"===l&&(o=!1!==e.zb(n,5)._compositionEnd(t.target.value)&&o),"input"===l&&(o=!1!==e.zb(n,10)._noopInputHandler()&&o),"ngModelChange"===l&&(o=!1!==(a.content=t)&&o),o},null,null)),e.ob(5,16384,null,0,c.b,[e.C,e.k,[2,c.a]],null,null),e.Bb(1024,null,c.d,function(n){return[n]},[c.b]),e.ob(7,671744,null,0,c.g,[[8,null],[8,null],[8,null],[6,c.d]],{model:[0,"model"]},{update:"ngModelChange"}),e.Bb(2048,null,c.e,null,[c.g]),e.ob(9,16384,null,0,c.f,[[4,c.e]],null,null),e.ob(10,4603904,null,0,b.a,[e.k,d.a,e.x],{minRows:[0,"minRows"],enabled:[1,"enabled"]},null)],function(n,l){n(l,7,0,l.component.content),n(l,10,0,"10","")},function(n,l){n(l,1,0,e.zb(l,2).disabled||null,"NoopAnimations"===e.zb(l,2)._animationMode),n(l,4,0,e.rb(1,"","This is an encrypted online questionnaire.\n\nHere is the guide:\n1. Type or paste the content of your questionnaire here.\n2. Click the 'Create' button above.",""),e.zb(l,9).ngClassUntouched,e.zb(l,9).ngClassTouched,e.zb(l,9).ngClassPristine,e.zb(l,9).ngClassDirty,e.zb(l,9).ngClassValid,e.zb(l,9).ngClassInvalid,e.zb(l,9).ngClassPending)})}function E(n){return e.Gb(0,[(n()(),e.pb(0,0,null,null,1,"app-q-create",[],null,null,null,k,x)),e.ob(1,114688,null,0,v,[y,w.k],null,null)],function(n,l){n(l,1,0)},null)}var R=e.lb("app-q-create",v,E,{},{},[]),L=t("lzlj"),q=t("igqZ"),A=t("Iab2");class C{constructor(n,l){this.g=n,this.route=l,this.questionnaireAddress=this.getQuestionnaireAddress(),this.resultAddress=this.getResultsAddress(),this.content="Questionnaire URL\nSend it to your questionee.\n"+this.questionnaireAddress+"\n\nResults URL:\nOpen it to view results. You should keep it a SECRET.\n"+this.resultAddress+"\n"}ngOnInit(){new ClipboardJS(".btnCopy")}download(){let n=new Blob([this.content],{type:"text/plain"});A.saveAs(n,`${this.route.snapshot.params.qid}.txt`)}getQuestionnaireAddress(){let n=new Uint8Array(p.box.secretKeyLength+p.box.publicKeyLength);n.set(this.g.thatKeyPair.secretKey,0),n.set(this.g.thisKeyPair.publicKey,p.box.secretKeyLength);let l=Object(h.encodeBase64)(n);return`${`${`${location.origin}${f.a.offset}`}/${this.route.snapshot.params.qid}`}#${l}`}getResultsAddress(){let n=new Uint8Array(p.box.secretKeyLength+p.box.secretKeyLength);n.set(this.g.thisKeyPair.secretKey,0),n.set(this.g.thatKeyPair.secretKey,p.box.secretKeyLength);let l=Object(h.encodeBase64)(n);return`${`${`${location.origin}${f.a.offset}`}/r/${this.route.snapshot.params.qid}`}#${l}`}}var j=e.nb({encapsulation:0,styles:[[""]],data:{}});function O(n){return e.Gb(0,[(n()(),e.pb(0,0,null,null,3,"div",[["class","button-row"]],null,null,null,null,null)),(n()(),e.pb(1,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.download()&&e),e},u.b,u.a)),e.ob(2,180224,null,0,i.b,[e.k,s.b,[2,r.a]],null,null),(n()(),e.Eb(-1,0,["Download"])),(n()(),e.pb(4,0,null,null,31,"div",[["class","monospace pre-line"],["id","content"]],null,null,null,null,null)),(n()(),e.pb(5,0,null,null,13,"mat-card",[["class","content mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,L.d,L.a)),e.ob(6,49152,null,0,q.a,[[2,r.a]],null,null),(n()(),e.pb(7,0,null,0,7,"mat-card-header",[["class","mat-card-header"]],null,null,null,L.c,L.b)),e.ob(8,49152,null,0,q.c,[],null,null),(n()(),e.pb(9,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),e.ob(10,16384,null,0,q.f,[],null,null),(n()(),e.Eb(-1,null,["Questionnaire URL"])),(n()(),e.pb(12,0,null,1,2,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),e.ob(13,16384,null,0,q.e,[],null,null),(n()(),e.Eb(-1,null,["Send it to your questionee."])),(n()(),e.pb(15,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.ob(16,16384,null,0,q.b,[],null,null),(n()(),e.pb(17,0,null,null,1,"p",[["class","btnCopy monospace"],["data-clipboard-target","#qurl"],["id","qurl"]],null,null,null,null,null)),(n()(),e.Eb(18,null,["",""])),(n()(),e.pb(19,0,null,null,16,"mat-card",[["class","content mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,L.d,L.a)),e.ob(20,49152,null,0,q.a,[[2,r.a]],null,null),(n()(),e.pb(21,0,null,0,10,"mat-card-header",[["class","mat-card-header"]],null,null,null,L.c,L.b)),e.ob(22,49152,null,0,q.c,[],null,null),(n()(),e.pb(23,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),e.ob(24,16384,null,0,q.f,[],null,null),(n()(),e.Eb(-1,null,["Results URL"])),(n()(),e.pb(26,0,null,1,5,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),e.ob(27,16384,null,0,q.e,[],null,null),(n()(),e.Eb(-1,null,["Open it to view results. You should keep it a "])),(n()(),e.pb(29,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),e.Eb(-1,null,["SECRET"])),(n()(),e.Eb(-1,null,["."])),(n()(),e.pb(32,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),e.ob(33,16384,null,0,q.b,[],null,null),(n()(),e.pb(34,0,null,null,1,"p",[["class","btnCopy monospace"],["data-clipboard-target","#curl"],["id","curl"]],null,null,null,null,null)),(n()(),e.Eb(35,null,["",""]))],null,function(n,l){var t=l.component;n(l,1,0,e.zb(l,2).disabled||null,"NoopAnimations"===e.zb(l,2)._animationMode),n(l,5,0,"NoopAnimations"===e.zb(l,6)._animationMode),n(l,18,0,t.questionnaireAddress),n(l,19,0,"NoopAnimations"===e.zb(l,20)._animationMode),n(l,35,0,t.resultAddress)})}function z(n){return e.Gb(0,[(n()(),e.pb(0,0,null,null,1,"app-q-created",[],null,null,null,O,j)),e.ob(1,114688,null,0,C,[y,w.a],null,null)],function(n,l){n(l,1,0)},null)}var K=e.lb("app-q-created",C,z,{},{},[]),M=t("SVse"),U=t("POq0"),P=t("Xd0L");class T{}var _=t("IP0z"),B=t("cUpR"),$=t("HsOI"),I=t("ZwOa"),S=t("02hT"),H=t("Q+lL");t.d(l,"QuestionerModuleNgFactory",function(){return Q});var Q=e.mb(o,[],function(n){return e.wb([e.xb(512,e.j,e.Z,[[8,[a.a,R,K]],[3,e.j],e.v]),e.xb(4608,M.k,M.j,[e.s,[2,M.r]]),e.xb(4608,c.i,c.i,[]),e.xb(4608,U.a,U.a,[]),e.xb(4608,P.a,P.a,[]),e.xb(1073742336,M.c,M.c,[]),e.xb(1073742336,c.h,c.h,[]),e.xb(1073742336,c.c,c.c,[]),e.xb(1073742336,w.l,w.l,[[2,w.q],[2,w.k]]),e.xb(1073742336,T,T,[]),e.xb(1073742336,_.a,_.a,[]),e.xb(1073742336,P.d,P.d,[[2,P.b],[2,B.f]]),e.xb(1073742336,d.b,d.b,[]),e.xb(1073742336,P.h,P.h,[]),e.xb(1073742336,i.c,i.c,[]),e.xb(1073742336,b.b,b.b,[]),e.xb(1073742336,U.b,U.b,[]),e.xb(1073742336,$.a,$.a,[]),e.xb(1073742336,I.a,I.a,[]),e.xb(1073742336,q.d,q.d,[]),e.xb(1073742336,P.e,P.e,[]),e.xb(1073742336,P.f,P.f,[]),e.xb(1073742336,S.a,S.a,[]),e.xb(1073742336,H.a,H.a,[]),e.xb(1073742336,o,o,[]),e.xb(1024,w.i,function(){return[[{path:"create",component:v},{path:":qid/created",component:C},{path:"",redirectTo:"/create",pathMatch:"full"}]]},[])])})}}]);