(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Iab2:function(n,t,e){var l,o;void 0===(o="function"==typeof(l=function(){"use strict";function t(n,t,e){var l=new XMLHttpRequest;l.open("GET",n),l.responseType="blob",l.onload=function(){a(l.response,t,e)},l.onerror=function(){console.error("could not download file")},l.send()}function e(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function l(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(t){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(n,a,u){var i=o.URL||o.webkitURL,r=document.createElement("a");r.download=a=a||n.name||"download",r.rel="noopener","string"==typeof n?(r.href=n,r.origin===location.origin?l(r):e(r.href)?t(n,a,u):l(r,r.target="_blank")):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){l(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,a){if(o=o||n.name||"download","string"!=typeof n)navigator.msSaveOrOpenBlob(function(n,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n}(n,a),o);else if(e(n))t(n,o,a);else{var u=document.createElement("a");u.href=n,u.target="_blank",setTimeout(function(){l(u)})}}:function(n,e,l,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof n)return t(n,e,l);var u="application/octet-stream"===n.type,i=/constructor/i.test(o.HTMLElement)||o.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||u&&i)&&"object"==typeof FileReader){var s=new FileReader;s.onloadend=function(){var n=s.result;n=r?n:n.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=n:location=n,a=null},s.readAsDataURL(n)}else{var c=o.URL||o.webkitURL,b=c.createObjectURL(n);a?a.location=b:location.href=b,a=null,setTimeout(function(){c.revokeObjectURL(b)},4e4)}});o.saveAs=a.saveAs=a,n.exports=a})?l.apply(t,[]):l)||(n.exports=o)},"sY+Z":function(n,t,e){"use strict";e.r(t);var l=e("CcnG"),o=function(){return function(){}}(),a=e("pMnS"),u=e("bujt"),i=e("UodH"),r=e("lLAP"),s=e("wFw1"),c=e("gIcY"),b=e("/VYK"),d=e("dWZg"),p=e("mrSG"),f=e("WKRr"),h=e("Qnqb"),g=e("67Y/"),y=e("AytR"),m=e("t/Na"),v=function(){function n(n){this.http=n}return n.prototype.genKeyPairs=function(){this.thisKeyPair=f.box.keyPair(),this.thatKeyPair=f.box.keyPair()},n.prototype.sendQContent=function(n){var t=this.encrypt(n);return this.http.post(y.a.apiURL+"/q",{content:t[0],nonce:t[1]}).pipe(Object(g.a)(function(n){return n.qid}))},n.prototype.encrypt=function(n){var t=Object(h.decodeUTF8)(n),e=Object(f.randomBytes)(f.box.nonceLength),l=Object(f.box)(t,e,this.thatKeyPair.publicKey,this.thisKeyPair.secretKey);return[Object(h.encodeBase64)(l),Object(h.encodeBase64)(e)]},n.ngInjectableDef=l.Kb({factory:function(){return new n(l.Ob(m.c))},token:n,providedIn:"root"}),n}(),w=function(){function n(n,t){this.g=n,this.router=t,this.rows=5,this.content=""}return n.prototype.ngOnInit=function(){this.textarea.nativeElement.focus()},n.prototype.onClick=function(){return p.b(this,void 0,void 0,function(){var n;return p.e(this,function(t){switch(t.label){case 0:return this.g.genKeyPairs(),[4,this.g.sendQContent(this.content).toPromise()];case 1:return n=t.sent(),this.router.navigateByUrl("/q/"+n+"/created"),[2]}})})},n.prototype.onChange=function(){var n=this.content.split(/\r\n|\r|\n/).length;this.rows=n>5?n:5},n}(),k=e("ZYCi"),q=l.pb({encapsulation:0,styles:[[".q-create-textarea[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.5em}"]],data:{}});function B(n){return l.Ib(0,[l.Eb(402653184,1,{textarea:0}),(n()(),l.rb(1,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.onClick()&&l),l},u.b,u.a)),l.qb(2,180224,null,0,i.b,[l.k,r.b,[2,s.a]],null,null),(n()(),l.Gb(-1,0,["Create"])),(n()(),l.rb(4,0,[[1,0],["textarea",1]],null,6,"textarea",[["cdkAutosizeMinRows","10"],["cdkTextareaAutosize",""],["class","monospace q-create-textarea cdk-textarea-autosize"],["rows","1"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,t,e){var o=!0,a=n.component;return"input"===t&&(o=!1!==l.Bb(n,5)._handleInput(e.target.value)&&o),"blur"===t&&(o=!1!==l.Bb(n,5).onTouched()&&o),"compositionstart"===t&&(o=!1!==l.Bb(n,5)._compositionStart()&&o),"compositionend"===t&&(o=!1!==l.Bb(n,5)._compositionEnd(e.target.value)&&o),"input"===t&&(o=!1!==l.Bb(n,10)._noopInputHandler()&&o),"ngModelChange"===t&&(o=!1!==(a.content=e)&&o),o},null,null)),l.qb(5,16384,null,0,c.b,[l.E,l.k,[2,c.a]],null,null),l.Db(1024,null,c.d,function(n){return[n]},[c.b]),l.qb(7,671744,null,0,c.g,[[8,null],[8,null],[8,null],[6,c.d]],{model:[0,"model"]},{update:"ngModelChange"}),l.Db(2048,null,c.e,null,[c.g]),l.qb(9,16384,null,0,c.f,[[4,c.e]],null,null),l.qb(10,4603904,null,0,b.a,[l.k,d.a,l.z],{minRows:[0,"minRows"],enabled:[1,"enabled"]},null)],function(n,t){n(t,7,0,t.component.content),n(t,10,0,"10","")},function(n,t){n(t,1,0,l.Bb(t,2).disabled||null,"NoopAnimations"===l.Bb(t,2)._animationMode),n(t,4,0,l.tb(1,"","This is an encrypted online questionnaire.\n\nHere is the guide:\n1. Type or paste the content of your questionnaire here.\n2. Click the 'Create' button above.",""),l.Bb(t,9).ngClassUntouched,l.Bb(t,9).ngClassTouched,l.Bb(t,9).ngClassPristine,l.Bb(t,9).ngClassDirty,l.Bb(t,9).ngClassValid,l.Bb(t,9).ngClassInvalid,l.Bb(t,9).ngClassPending)})}function R(n){return l.Ib(0,[(n()(),l.rb(0,0,null,null,1,"app-q-create",[],null,null,null,B,q)),l.qb(1,114688,null,0,w,[v,k.k],null,null)],function(n,t){n(t,1,0)},null)}var x=l.nb("app-q-create",w,R,{},{},[]),L=e("Iab2"),A=function(){function n(n,t){this.g=n,this.route=t,this.questionnaireAddress=this.getQuestionnaireAddress(),this.resultAddress=this.getResultsAddress(),this.content="Questionnaire URL:\n"+this.questionnaireAddress+"\nResults URL:\n"+this.resultAddress+"\n"}return n.prototype.ngOnInit=function(){new ClipboardJS(".btnCopy")},n.prototype.download=function(){var n=new Blob([this.content],{type:"text/plain"});L.saveAs(n,this.route.snapshot.params.qid+".txt")},n.prototype.getQuestionnaireAddress=function(){var n=new Uint8Array(f.box.secretKeyLength+f.box.publicKeyLength);n.set(this.g.thatKeyPair.secretKey,0),n.set(this.g.thisKeyPair.publicKey,f.box.secretKeyLength);var t=Object(h.encodeBase64)(n);return""+location.origin+y.a.offset+"/"+this.route.snapshot.params.qid+"#"+t},n.prototype.getResultsAddress=function(){var n=new Uint8Array(f.box.secretKeyLength+f.box.secretKeyLength);n.set(this.g.thisKeyPair.secretKey,0),n.set(this.g.thatKeyPair.secretKey,f.box.secretKeyLength);var t=Object(h.encodeBase64)(n);return""+location.origin+y.a.offset+"/r/"+this.route.snapshot.params.qid+"#"+t},n}(),C=l.pb({encapsulation:0,styles:[[""]],data:{}});function z(n){return l.Ib(0,[(n()(),l.rb(0,0,null,null,9,"div",[["class","button-row"]],null,null,null,null,null)),(n()(),l.rb(1,0,null,null,2,"button",[["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.download()&&l),l},u.b,u.a)),l.qb(2,180224,null,0,i.b,[l.k,r.b,[2,s.a]],null,null),(n()(),l.Gb(-1,0,["Download"])),(n()(),l.rb(4,0,null,null,2,"button",[["class","btnCopy"],["data-clipboard-target","#qurl"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,u.b,u.a)),l.qb(5,180224,null,0,i.b,[l.k,r.b,[2,s.a]],null,null),(n()(),l.Gb(-1,0,["Copy Questionnaire URL"])),(n()(),l.rb(7,0,null,null,2,"button",[["class","btnCopy"],["data-clipboard-target","#rurl"],["mat-stroked-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],null,null,u.b,u.a)),l.qb(8,180224,null,0,i.b,[l.k,r.b,[2,s.a]],null,null),(n()(),l.Gb(-1,0,["Copy Results URL"])),(n()(),l.rb(10,0,null,null,9,"div",[["class","monospace pre-line content"],["id","content"]],null,null,null,null,null)),(n()(),l.Gb(-1,null,[" Questionnaire URL:"])),(n()(),l.rb(12,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),l.rb(13,0,null,null,1,"span",[["id","qurl"]],null,null,null,null,null)),(n()(),l.Gb(14,null,["",""])),(n()(),l.rb(15,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),l.Gb(-1,null,[" Results URL:"])),(n()(),l.rb(17,0,null,null,0,"br",[],null,null,null,null,null)),(n()(),l.rb(18,0,null,null,1,"span",[["id","rurl"]],null,null,null,null,null)),(n()(),l.Gb(19,null,["",""]))],null,function(n,t){var e=t.component;n(t,1,0,l.Bb(t,2).disabled||null,"NoopAnimations"===l.Bb(t,2)._animationMode),n(t,4,0,l.Bb(t,5).disabled||null,"NoopAnimations"===l.Bb(t,5)._animationMode),n(t,7,0,l.Bb(t,8).disabled||null,"NoopAnimations"===l.Bb(t,8)._animationMode),n(t,14,0,e.questionnaireAddress),n(t,19,0,e.resultAddress)})}function j(n){return l.Ib(0,[(n()(),l.rb(0,0,null,null,1,"app-q-created",[],null,null,null,z,C)),l.qb(1,114688,null,0,A,[v,k.a],null,null)],function(n,t){n(t,1,0)},null)}var K=l.nb("app-q-created",A,j,{},{},[]),U=e("Ip0R"),O=e("M2Lx"),M=e("Wf4p"),P=function(){return function(){}}(),E=e("Fzqc"),T=e("ZYjt"),_=e("seP3"),I=e("b716");e.d(t,"QuestionerModuleNgFactory",function(){return G});var G=l.ob(o,[],function(n){return l.yb([l.zb(512,l.j,l.bb,[[8,[a.a,x,K]],[3,l.j],l.x]),l.zb(4608,U.k,U.j,[l.u,[2,U.r]]),l.zb(4608,c.i,c.i,[]),l.zb(4608,O.a,O.a,[]),l.zb(4608,M.a,M.a,[]),l.zb(1073742336,U.c,U.c,[]),l.zb(1073742336,c.h,c.h,[]),l.zb(1073742336,c.c,c.c,[]),l.zb(1073742336,k.l,k.l,[[2,k.q],[2,k.k]]),l.zb(1073742336,P,P,[]),l.zb(1073742336,E.a,E.a,[]),l.zb(1073742336,M.d,M.d,[[2,M.b],[2,T.f]]),l.zb(1073742336,d.b,d.b,[]),l.zb(1073742336,M.h,M.h,[]),l.zb(1073742336,i.c,i.c,[]),l.zb(1073742336,b.b,b.b,[]),l.zb(1073742336,O.b,O.b,[]),l.zb(1073742336,_.a,_.a,[]),l.zb(1073742336,I.a,I.a,[]),l.zb(1073742336,o,o,[]),l.zb(1024,k.i,function(){return[[{path:"create",component:w},{path:":qid/created",component:A},{path:"",redirectTo:"/create",pathMatch:"full"}]]},[])])})}}]);